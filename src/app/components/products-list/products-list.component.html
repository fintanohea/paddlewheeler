<mat-sidenav-container
    class="refine-search-container" (backdropClick)="closeSideNav()">
  <mat-sidenav #sidenav (keydown.escape)="closeSideNav()" disableClose>
    <mat-form-field appearance="fill">
      <mat-label>Vendors</mat-label>
      <mat-select [(value)]="selectedVendor" (selectionChange)="filterByVendor()">
        <mat-option value="all">All</mat-option>
        <mat-option
          *ngFor="let vendor of vendors"
          [value]="vendor.id">
          {{ vendor.name }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-sidenav>

  <mat-sidenav-content>
    <div class="col-md-12 scrollmenu">
      <ul *ngIf="!loadingCatagories" class="categories-nav-menu list-group flex-md-row justify-content-center">
        <li 
          [ngClass]="{'active': !category}"
          class="p-4 list-group-item"
          routerLink="/store">
          All
        </li>
        <li
          [ngClass]="{'active': category == c.id}" 
          class="p-4 list-group-item"
          *ngFor="let c of categories"
          routerLink="/store/{{c.id}}">
          {{ c.name }}
        </li>
      </ul>  
    </div>
    

    <p class="m-4" *ngIf="!loadingProducts">
      <button class="button refine-search-button" (click)="sidenav.open()">
        <mat-icon aria-hidden="false" aria-label="filter_list icon">filter_list</mat-icon>
        <span>Refine Search</span>
      </button>
    </p>
    
    <main class="catalog" *ngIf="!loadingProducts && !loadingCatagories && !loadingVendors; else loadingBlock">
        <app-products-list-item
          class="catalog__product"
          *ngFor="let product of displayedProducts"
          [product]="product"
          (isLoading)="isLoadingFromProduct($event)"
          (loadedProducts)="loadedProducts($event)">
            {{ product.name }}
        </app-products-list-item>
    </main>

    <div 
      class="text-center no-products-container" 
      *ngIf="displayedProducts.length === 0 && !loadingProducts">
      <img class="mx-auto d-block" src="../../../assets/img/sad_panda.png" alt="sad panda no product">
      <span>
        There was no products found
      </span>
    </div>
    
    <ng-template #loadingBlock>
      <main class="catalog catalog--loading">
        <span class="catalog__loading">
          <mat-spinner></mat-spinner>
        </span>
      </main>
    </ng-template>


  </mat-sidenav-content>
</mat-sidenav-container>

